#!/bin/bash
# __define-ocg__ Auto gallery updater with lightbox links

varOcg="images"

if [ ! -d "$varOcg" ]; then
  echo "❌ Folder '$varOcg' not found. Run create-image-folder.sh first."
  exit 1
fi

gallery_content=""
for img in "$varOcg"/*.{jpg,jpeg,png,gif}; do
  if [ -f "$img" ]; then
    gallery_content+="  <img src=\"$img\" alt=\"Tailor work image\" onclick=\"openLightbox('$img')\" class=\"gallery-img\"/>\n"
  fi
done

awk -v newContent="$gallery_content" '
  /<div id="gallery"/ {print; print newContent; skip=1; next}
  /<\/div>/ && skip {skip=0; next}
  !skip
' index.html > temp.html && mv temp.html index.html

git add index.html
git commit -m "Auto-updated gallery with clickable lightbox"
git push origin main

echo "✅ Gallery updated successfully with lightbox feature!"
